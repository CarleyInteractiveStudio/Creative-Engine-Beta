<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editor - Creative Engine</title>
    <link rel="stylesheet" href="css/editor.css">
    <link rel="stylesheet" href="css/debug.css">
    <link rel="icon" href="image/Logo_C.png">
</head>
<body class="theme-modern-dark">
    <div id="editor-container">
        <header id="menubar">
            <div class="menu-item">
                <button class="menu-btn">Archivo</button>
                <div class="menu-content">
                    <a href="#" id="menu-new-scene">Nueva Escena</a>
                    <a href="#" id="menu-open-scene">Abrir Escena</a>
                    <a href="#" id="menu-save-scene">Guardar Escena</a>
                    <a href="#" id="menu-save-scene-as">Guardar Escena Como...</a>
                    <hr>
                    <a href="#" id="menu-exit">Salir</a>
                </div>
            </div>
            <div class="menu-item">
                <button class="menu-btn">Editar</button>
                <div class="menu-content">
                    <a href="#" id="menu-undo">Deshacer</a>
                    <a href="#" id="menu-redo">Rehacer</a>
                    <hr>
                    <a href="#" id="menu-project-settings">Ajustes del Proyecto...</a>
                    <a href="#" id="menu-preferences">Preferencias...</a>
                </div>
            </div>
            <div class="menu-item">
                <button class="menu-btn">Ventana</button>
                <div class="menu-content">
                    <a href="#" id="menu-window-hierarchy" data-base-name="Jerarqu√≠a">‚úì Jerarqu√≠a</a>
                    <a href="#" id="menu-window-inspector" data-base-name="Inspector">‚úì Inspector</a>
                    <a href="#" id="menu-window-assets" data-base-name="Assets">‚úì Assets</a>
                    <a href="#" id="menu-window-animation" data-base-name="Animaci√≥n">Animaci√≥n</a>
                </div>
            </div>
            <div class="menu-item">
                <button class="menu-btn">Ayuda</button>
                <div class="menu-content">
                    <a href="#">Documentaci√≥n</a>
                    <a href="#">Reportar un Bug</a>
                </div>
            </div>
            <div id="project-name-display"></div>
        </header>

        <main id="editor-main-content">
            <!-- Panel de Jerarqu√≠a -->
            <div id="hierarchy-panel" class="editor-panel">
                <div class="panel-header">
                    <h3>Jerarqu√≠a</h3>
                    <button class="close-panel-btn" data-panel="hierarchy-panel">&times;</button>
                </div>
                <div id="hierarchy-content" class="panel-content">
                    <!-- Los objetos de la escena se listar√°n aqu√≠ -->
                </div>
            </div>

            <!-- Panel Central (Escena/Juego/C√≥digo) -->
            <div id="scene-panel" class="editor-panel">
                <div class="panel-header">
                    <div id="editor-toolbar">
                        <button id="tool-move" class="toolbar-btn active" title="Mover (Q)">M</button>
                        <button id="tool-pan" class="toolbar-btn" title="Panear (W)">P</button>
                        <button id="tool-scale" class="toolbar-btn" title="Escalar (E)">S</button>
                    </div>
                    <div class="view-toggle">
                        <button class="view-toggle-btn active" data-view="scene-content">Escena</button>
                        <button class="view-toggle-btn" data-view="game-content">Juego</button>
                        <button class="view-toggle-btn" data-view="code-editor-content">C√≥digo</button>
                    </div>
                    <div id="game-controls">
                        <button id="play-btn" title="Play (Ctrl+P)">‚ñ∂</button>
                        <button id="pause-btn" title="Pause">‚ùö‚ùö</button>
                        <button id="stop-btn" title="Stop">‚ñ†</button>
                    </div>
                </div>
                <div id="scene-content" class="panel-content view-content active">
                    <canvas id="scene-canvas"></canvas>
                </div>
                <div id="game-content" class="panel-content view-content">
                    <canvas id="game-canvas"></canvas>
                </div>
                <div id="code-editor-content" class="panel-content view-content">
                    <div id="code-toolbar">
                        <button id="code-save-btn" title="Guardar (Ctrl+S)">üíæ Guardar</button>
                        <button id="code-undo-btn" title="Deshacer">‚Ü∂</button>
                        <button id="code-redo-btn" title="Rehacer">‚Ü∑</button>
                    </div>
                    <div id="codemirror-container"></div>
                </div>
            </div>

            <!-- Panel de Inspector -->
            <div id="inspector-panel" class="editor-panel">
                <div class="panel-header">
                    <h3>Inspector</h3>
                    <button class="close-panel-btn" data-panel="inspector-panel">&times;</button>
                </div>
                <div class="panel-content">
                    <!-- Las propiedades del objeto seleccionado se mostrar√°n aqu√≠ -->
                </div>
            </div>

            <!-- Panel Inferior (Assets/Consola/Debug) -->
            <div id="assets-panel" class="editor-panel">
                <div class="panel-header tab-bar">
                    <button class="tab-btn active" data-tab="assets-content">Assets</button>
                    <button class="tab-btn" data-tab="console-content">Consola</button>
                    <button class="tab-btn" data-tab="debug-content">Debug</button>
                    <div class="panel-header-right">
                       <span id="current-scene-name">Escena sin t√≠tulo</span>
                       <button class="close-panel-btn" data-panel="assets-panel">&times;</button>
                    </div>
                </div>
                <div class="panel-content-container">
                    <div id="assets-content" class="panel-content tab-content active">
                        <div id="asset-folder-tree"></div>
                        <div id="asset-grid-view"></div>
                    </div>
                    <div id="console-content" class="panel-content tab-content"></div>
                    <div id="debug-content" class="panel-content tab-content"></div>
                </div>
            </div>
        </main>
    </div>

    <!-- Animation Editor Panel (Floating) -->
    <div id="animation-panel" class="editor-panel floating-panel hidden">
        <div class="panel-header">
            <h3>Editor de Animaci√≥n</h3>
            <button id="timeline-toggle-btn">‚ñ≤</button>
            <button class="close-panel-btn" data-panel="animation-panel">&times;</button>
        </div>
        <div class="panel-content">
            <div id="animation-panel-overlay">
                <p>Abre o crea un asset de animaci√≥n (.cea) para empezar.</p>
            </div>
            <div id="animation-edit-view">
                 <div id="drawing-tools">
                    <button class="tool-btn active" data-tool="pencil" title="L√°piz">‚úèÔ∏è</button>
                    <button class="tool-btn" data-tool="eraser" title="Borrador">üßº</button>
                    <input type="color" id="drawing-color-picker" value="#ffffff" title="Color">
                    <button class="tool-btn active" data-draw-mode="free">Libre</button>
                    <button class="tool-btn" data-draw-mode="pixel">Pixel</button>
                </div>
                <canvas id="drawing-canvas" width="256" height="256"></canvas>
                <div class="frame-controls">
                    <button id="add-frame-btn">A√±adir Fotograma</button>
                    <button id="delete-frame-btn">Borrar Fotograma</button>
                </div>
            </div>
            <div id="animation-playback-view" class="hidden">
                 <canvas id="animation-playback-canvas" width="256" height="256"></canvas>
            </div>
            <div id="animation-timeline-container">
                <div class="timeline-controls">
                    <button id="animation-play-btn">‚ñ∂Ô∏è</button>
                    <button id="animation-stop-btn">‚èπÔ∏è</button>
                    <button id="animation-save-btn">üíæ</button>
                </div>
                <div id="animation-timeline"></div>
            </div>
        </div>
        <div class="resize-handle" data-direction="right"></div>
        <div class="resize-handle" data-direction="bottom"></div>
        <div class="resize-handle" data-direction="both"></div>
    </div>

    <!-- Modals -->
    <div id="add-component-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3>A√±adir Ley (Componente)</h3>
            <div id="component-list"></div>
        </div>
    </div>
    <div id="project-settings-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3>Ajustes del Proyecto</h3>
            <p>Pr√≥ximamente...</p>
        </div>
    </div>
    <div id="preferences-modal" class="modal-overlay" style="display:none;">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3>Preferencias</h3>
             <label for="theme-selector">Tema del Editor:</label>
             <select id="theme-selector">
                 <option value="theme-modern-dark">Oscuro Moderno</option>
                 <option value="theme-light">Claro</option>
                 <option value="theme-navy-blue">Azul Marino</option>
             </select>
        </div>
    </div>
    <div id="sprite-selector-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h3>Seleccionar Sprite</h3>
            <div id="sprite-selector-grid"></div>
        </div>
    </div>

    <!-- Context Menus -->
    <div id="context-menu" class="context-menu">
        <div class="menu-item" data-action="create-folder">Crear Carpeta</div>
        <div class="menu-item" data-action="create-script">Crear Script (.ces)</div>
        <div class="menu-item" data-action="create-scene">Crear Escena (.ceScene)</div>
        <div class="menu-item" data-action="create-material">Crear Material (.ceMat)</div>
        <div class="menu-item" data-action="create-animation">Crear Animaci√≥n (.cea)</div>
        <div class="menu-item" data-action="create-readme">Crear README.md</div>
        <hr>
        <div class="menu-item" data-action="rename">Renombrar</div>
        <div class="menu-item" data-action="delete">Borrar</div>
        <hr class="folder-only-divider">
        <div class="menu-item folder-only" data-action="export-package">Exportar Paquete (.cep)</div>
    </div>
    <div id="hierarchy-context-menu" class="context-menu">
        <div class="menu-item" data-action="create-empty">Crear Objeto Vac√≠o</div>
        <div class="menu-item with-submenu">
            <span>UI</span>
            <div class="submenu">
                <div class="menu-item" data-action="create-ui-canvas">Canvas</div>
                <div class="menu-item" data-action="create-ui-text">Texto</div>
                <div class="menu-item" data-action="create-ui-button">Bot√≥n</div>
                <div class="menu-item" data-action="create-ui-image">Imagen</div>
            </div>
        </div>
        <div class="menu-item with-submenu">
            <span>2D</span>
            <div class="submenu">
                 <div class="menu-item" data-action="create-materia">Materia</div>
                 <div class="menu-item" data-action="create-animated-materia">Materia Animada</div>
            </div>
        </div>
        <div class="menu-item" data-action="create-camera">C√°mara</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/showdown@2.1.0/dist/showdown.min.js"></script>
    <script type="module" src="js/editor.js"></script>
</body>
</html>
